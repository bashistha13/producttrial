@model List<trial.Models.PurchaseEntry>
@{ ViewData["Title"] = "Product Entry"; }

<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap4.min.css" />

<div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="text-dark">Product Entry List</h2>
    <button class="btn btn-success shadow-sm">
        <i class="bi bi-plus-lg mr-2"></i> New Entry
    </button>
</div>

@if (TempData["Success"] != null) { <div class="alert alert-success shadow-sm">@TempData["Success"]</div> }
@if (TempData["Error"] != null) { <div class="alert alert-danger shadow-sm">@TempData["Error"]</div> }

<div class="card shadow-sm border-0">
    <div class="card-body">
        <table id="entryTable" class="table table-hover table-bordered">
            <thead class="thead-light">
                <tr>
                    <th>Invoice No</th>
                    <th>Invoice Date</th>
                    <th>Supplier</th>
                    <th>VAT No</th>
                    <th class="text-right">Total Amount</th>
                    <th class="text-center" style="width: 120px;">Action</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td class="align-middle font-weight-bold">@item.InvoiceNo</td>
                        <td class="align-middle">@item.PurchaseDate.ToString("yyyy-MM-dd")</td>
                        <td class="align-middle">@item.Supplier</td>
                        <td class="align-middle">@item.SupplierVAT</td>
                        <td class="align-middle text-right font-weight-bold">Rs @item.TotalAmount.ToString("N2")</td>
                        
                        <td class="align-middle text-center">
                            <a href="#" class="btn btn-outline-info btn-sm rounded-circle mr-1" title="View Details">
                                <i class="bi bi-eye-fill"></i>
                            </a>

                            <form asp-action="Delete" asp-route-id="@item.PurchaseEntryId" method="post" style="display:inline" onsubmit="return confirm('Are you sure you want to delete this invoice?');">
                                <button type="submit" class="btn btn-outline-danger btn-sm rounded-circle" title="Delete">
                                    <i class="bi bi-trash-fill"></i>
                                </button>
                            </form>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

@section Scripts {
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap4.min.js"></script>
    <script>
        $(document).ready(function() {
            $('#entryTable').DataTable({
                "order": [[ 1, "desc" ]] // Sort by Date desc
            });
        });
    </script>
}